pub mod config_window;
pub mod dashboard;
//–º–æ–¥—É–ª–∏  –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–æ–≥—Ä–∞–º–º—ã –∫–∞–∫ ui::dashboard –∏ ui::config_window

use crate::config::AppConfig; //–ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è).

use egui::{Context, TopBottomPanel, CentralPanel};
/*
use egui::{...} ‚Äî –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ egui:
Context ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ UI.
TopBottomPanel ‚Äî –≤–µ—Ä—Ö–Ω—è—è –∏–ª–∏ –Ω–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
CentralPanel ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –æ–∫–Ω–∞ (–≥–¥–µ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è).
*/

pub struct App { //—Å–æ–∑–¥–∞—ë—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ App, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –°–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ–∫–æ–Ω.
    dashboard: dashboard::Dashboard,
    config_window: config_window::ConfigWindow,
}

impl App { //—Å–æ–∑–¥–∞–Ω–∏–µ App
    pub fn new() -> Self {
        let app_config = AppConfig::load(); //–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, config.json). –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è –≤ –æ–∫–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–ª–∏ —Å—Ä–∞–∑—É –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î.
        Self {
            dashboard: dashboard::Dashboard::new(), // —Å–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
            config_window: config_window::ConfigWindow::new(app_config), //–°–æ–∑–¥–∞—ë—Ç –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Ç—É–¥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        }
    }
}// –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≥–æ—Ç–æ–≤–æ–µ –∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ

impl eframe::App for App { //–ó–¥–µ—Å—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ç—Ä–µ–π—Ç App –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ eframe. –≠—Ç–æ—Ç —Ç—Ä–µ–π—Ç –≥–æ–≤–æ—Ä–∏—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É, –∫–∞–∫ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ
    fn update(&mut self, ctx: &Context, _frame: &mut eframe::Frame) {
        /*
        ctx: &Context ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∏—Å–æ–≤–∞–Ω–∏—è, –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä.
        _frame: &mut eframe::Frame ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ—Ä–µ–π–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏–µ, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∏ —Ç.–¥.). –ó–¥–µ—Å—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É —Å –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ–º.
        */
        TopBottomPanel::top("top_panel").show(ctx, |ui| { //–°–æ–∑–¥–∞—ë—Ç—Å—è –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º
            ui.horizontal(|ui| { //—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å—Ç—Ä–æ–∫—É
                ui.label("ControlPass"); //–∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
                ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| { //–∫–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∞" –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –≤–ø—Ä–∞–≤–æ
                    if ui.button("–ù–∞—Å—Ç—Ä–æ–π–∫–∞").clicked() { //–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –Ω–µ—ë –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è self.config_window.open(), —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫. 
                        self.config_window.open(); 
                    }
                });
            });
        });

        CentralPanel::default().show(ctx, |ui| { //–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å
            self.dashboard.ui(ui, &self.config_window.config); 
            /*
            –í—ã–∑—ã–≤–∞–µ—Ç—Å—è self.dashboard.ui(...) ‚Äî –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
            –í –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (&self.config_window.config), —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.
            */
        });

        self.config_window.ui(ctx);
        /*
        –≠—Ç–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π, –µ—Å–ª–∏ –æ–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ.
        config_window —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (–æ—Ç–∫—Ä—ã—Ç/–∑–∞–∫—Ä—ã—Ç, –ø–æ–ª—è, –∫–Ω–æ–ø–∫–∏).
    üìå –≠—Ç–æ—Ç –≤—ã–∑–æ–≤ –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –æ–∫–Ω–æ –ø–æ—è–≤–ª—è–ª–æ—Å—å –ø–æ–≤–µ—Ä—Ö –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
        */
    }
}